<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="registration-container ion-text-center">
    <ion-img src="assets/icon/Logo-Gasto-Movil03.png" alt="Logo Gasto Móvil" class="register-logo"></ion-img>
    <h2>Crea tu Cuenta</h2>
    <p>Únete a Gasto Móvil para controlar tus gastos de combustible.</p>

    <form [formGroup]="registroForm" (ngSubmit)="registrarse()">
      <ion-list lines="none">
        <ion-item>
          <ion-label position="floating">Nombre</ion-label>
          <ion-input type="text" formControlName="nombre"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched">
          <p class="error-message">El nombre es requerido.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">Apellido</ion-label>
          <ion-input type="text" formControlName="apellido"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('apellido')?.invalid && registroForm.get('apellido')?.touched">
          <p class="error-message">El apellido es requerido.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">Correo Electrónico</ion-label>
          <ion-input type="email" formControlName="correo"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('correo')?.invalid && registroForm.get('correo')?.touched">
          <p class="error-message" *ngIf="registroForm.get('correo')?.errors?.['required']">El correo es requerido.</p>
          <p class="error-message" *ngIf="registroForm.get('correo')?.errors?.['email']">Formato de correo inválido.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">Teléfono</ion-label>
          <ion-input type="tel" formControlName="telefono"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('telefono')?.invalid && registroForm.get('telefono')?.touched">
            <p class="error-message" *ngIf="registroForm.get('telefono')?.errors?.['required']">El teléfono es requerido.</p>
            <p class="error-message" *ngIf="registroForm.get('telefono')?.errors?.['pattern']">Formato de teléfono inválido.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">Género</ion-label>
          <ion-select formControlName="genero" interface="action-sheet" placeholder="Selecciona">
            <ion-select-option value="masculino">Masculino</ion-select-option>
            <ion-select-option value="femenino">Femenino</ion-select-option>
            <ion-select-option value="no-especificar">Prefiero no especificar</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('genero')?.invalid && registroForm.get('genero')?.touched">
            <p class="error-message">El género es requerido.</p>
        </ion-text>


        <ion-item>
          <ion-label position="floating">Contraseña</ion-label>
          <ion-input type="password" formControlName="contrasena"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('contrasena')?.invalid && registroForm.get('contrasena')?.touched">
          <p class="error-message" *ngIf="registroForm.get('contrasena')?.errors?.['required']">La contraseña es requerida.</p>
          <p class="error-message" *ngIf="registroForm.get('contrasena')?.errors?.['minlength']">Mínimo 6 caracteres.</p>
        </ion-text>

        <ion-item>
          <ion-label position="floating">Confirmar Contraseña</ion-label>
          <ion-input type="password" formControlName="confirmarContrasena"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="registroForm.get('confirmarContrasena')?.touched && registroForm.errors?.['mismatch']">
          <p class="error-message">Las contraseñas no coinciden.</p>
        </ion-text>
        <ion-text color="danger" *ngIf="registroForm.get('confirmarContrasena')?.errors?.['required'] && registroForm.get('confirmarContrasena')?.touched">
          <p class="error-message">La confirmación de contraseña es requerida.</p>
        </ion-text>

      </ion-list>

      <ion-button expand="block" type="submit" [disabled]="registroForm.invalid" class="ion-margin-top">Registrarse</ion-button>
    </form>

    <p class="ion-margin-top">
      ¿Ya tienes una cuenta? <ion-text color="primary" routerLink="/login">Inicia Sesión</ion-text>
    </p>
  </div>
</ion-content>